function animateBtn(t){t.style.top="7px",t.style.left="7px",t.style.boxShadow="3px 3px 0px 0px rgba(0,0,0,1)",setTimeout(function(){t.style.top="0px",t.style.left="0px",t.style.boxShadow="10px 10px 0px 0px rgba(0,0,0,1)"},100)}function Operation(t,e,n){switch(this.termOne=parseFloat(t),this.operator=e,this.termTwo=parseFloat(n),this.operator){case"+":this.result=parseFloat(t)+parseFloat(n);break;case"-":this.result=parseFloat(t)-parseFloat(n);break;case"*":this.result=parseFloat(t)*parseFloat(n);break;case"รท":this.result=parseFloat(t)/parseFloat(n)}}function checkBuff(){null!==operationBuff[3]&&(operationBuff[0]=2)}function updateBuff(){1===operationBuff[0]?operationBuff[1]=inputDisplay.textContent:operationBuff[2]=inputDisplay.textContent}function updateDisplay(t){var e=myOperations[t];displayLine.style.visibility=t>0?"visible":"hidden",displayTermOne.textContent=e.termOne+" "+e.operator,displayTermTwo.textContent=e.termTwo+" =",numberCount(e.result.toString())>MAX_INPUT_LENGTH?displayTermResult.textContent=e.result.toExponential(6):displayTermResult.textContent=e.result}function numberCount(t){return t=t.match(/\d/g),t.join("").length}for(var key=document.getElementsByClassName("key"),keyDigit=document.getElementsByClassName("key-digit"),keyOperator=document.getElementsByClassName("key-operators"),inputDisplay=document.getElementById("input-display"),keyDot=document.getElementById("key-dot"),keySign=document.getElementById("key-sign"),keyCLR=document.getElementById("key-clr"),keyResult=document.getElementById("key-result"),displayTermOne=document.getElementById("term-one"),displayTermTwo=document.getElementById("term-two"),displayTermResult=document.getElementById("term-result"),scrollTop=document.getElementById("scroll-top"),scrollBottom=document.getElementById("scroll-bottom"),displayLine=document.getElementById("display-line"),operationBuff=[1,0,0,null],myOperations=[],currentDiplay=null,MAX_INPUT_LENGTH=12,i=0;i<keyDigit.length;i++)keyDigit[i].onclick=function(t){animateBtn(this),numberCount(inputDisplay.textContent)>=MAX_INPUT_LENGTH||(checkBuff(),"0"===inputDisplay.textContent?inputDisplay.textContent=this.textContent:"-0"===inputDisplay.textContent?inputDisplay.textContent="-"+this.textContent:(inputDisplay.textContent+=this.textContent,12===numberCount(inputDisplay.textContent)&&inputDisplay.classList.remove("blink-cursor")),"0"!==inputDisplay.textContent&&"-0"!==inputDisplay.textContent&&"0."!==inputDisplay.textContent&&"-0."!==inputDisplay.textContent&&updateBuff())};for(var i=0;i<keyOperator.length;i++)keyOperator[i].onclick=function(t){if(animateBtn(this),"0"===inputDisplay.textContent||"-0"===inputDisplay.textContent||"0."===inputDisplay.textContent||"-0."===inputDisplay.textContent)return void(operationBuff[3]=this.textContent);if(1===operationBuff[0])inputDisplay.textContent="0",inputDisplay.classList.add("blink-cursor"),operationBuff[3]=this.textContent,operationBuff[0]=2;else{myOperations.push(new Operation(operationBuff[1],operationBuff[3],operationBuff[2])),inputDisplay.textContent="0",inputDisplay.classList.add("blink-cursor");var e=parseFloat(myOperations[myOperations.length-1].result);numberCount(myOperations[myOperations.length-1].result.toString())>=MAX_INPUT_LENGTH?operationBuff[1]=e.toExponential(6):operationBuff[1]=e,operationBuff[2]=0,operationBuff[3]=this.textContent,updateDisplay(myOperations.length-1),currentDiplay=myOperations.length-1}};keyDot.onclick=function(t){animateBtn(this),numberCount(inputDisplay.textContent)>MAX_INPUT_LENGTH-1||(checkBuff(),inputDisplay.textContent.indexOf(".")===-1&&(inputDisplay.textContent+=this.textContent),updateBuff())},keySign.onclick=function(t){animateBtn(this),checkBuff(),"-"===inputDisplay.textContent[0]?inputDisplay.textContent=inputDisplay.textContent.substr(1):inputDisplay.textContent="-"+inputDisplay.textContent,updateBuff()},keyCLR.onclick=function(t){animateBtn(this),operationBuff[0]=1,operationBuff[1]=0,operationBuff[2]=0,operationBuff[3]=null,inputDisplay.textContent="0",inputDisplay.classList.add("blink-cursor"),updateBuff()},keyResult.onclick=function(t){animateBtn(this),2===operationBuff[0]&&"0"!==inputDisplay.textContent&&"-0"!==inputDisplay.textContent&&"0."!==inputDisplay.textContent&&"-0."!==inputDisplay.textContent&&(myOperations.push(new Operation(operationBuff[1],operationBuff[3],operationBuff[2])),operationBuff[0]=1,operationBuff[1]=0,operationBuff[2]=0,operationBuff[3]=null,inputDisplay.textContent="0",currentDiplay=myOperations.length-1,updateDisplay(myOperations.length-1),inputDisplay.classList.add("blink-cursor"))},scrollTop.onclick=function(t){null!==currentDiplay&&(currentDiplay===myOperations.length-1||updateDisplay(++currentDiplay))},scrollBottom.onclick=function(t){null!==currentDiplay&&(0===currentDiplay||updateDisplay(--currentDiplay))};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiYW5pbWF0ZUJ0biIsImJ0biIsInN0eWxlIiwidG9wIiwibGVmdCIsImJveFNoYWRvdyIsInNldFRpbWVvdXQiLCJPcGVyYXRpb24iLCJ0ZXJtT25lIiwib3BlcmF0b3IiLCJ0ZXJtVHdvIiwidGhpcyIsInBhcnNlRmxvYXQiLCJyZXN1bHQiLCJjaGVja0J1ZmYiLCJvcGVyYXRpb25CdWZmIiwidXBkYXRlQnVmZiIsImlucHV0RGlzcGxheSIsInRleHRDb250ZW50IiwidXBkYXRlRGlzcGxheSIsImluZGV4Iiwib3BlcmF0aW9uIiwibXlPcGVyYXRpb25zIiwiZGlzcGxheUxpbmUiLCJ2aXNpYmlsaXR5IiwiZGlzcGxheVRlcm1PbmUiLCJkaXNwbGF5VGVybVR3byIsIm51bWJlckNvdW50IiwidG9TdHJpbmciLCJNQVhfSU5QVVRfTEVOR1RIIiwiZGlzcGxheVRlcm1SZXN1bHQiLCJ0b0V4cG9uZW50aWFsIiwibnVtYmVyIiwibWF0Y2giLCJqb2luIiwibGVuZ3RoIiwia2V5IiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwia2V5RGlnaXQiLCJrZXlPcGVyYXRvciIsImdldEVsZW1lbnRCeUlkIiwia2V5RG90Iiwia2V5U2lnbiIsImtleUNMUiIsImtleVJlc3VsdCIsInNjcm9sbFRvcCIsInNjcm9sbEJvdHRvbSIsImN1cnJlbnREaXBsYXkiLCJpIiwib25jbGljayIsImUiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJhZGQiLCJwdXNoIiwiaW5kZXhPZiIsInN1YnN0ciJdLCJtYXBwaW5ncyI6IkFBb0lBLFFBQUFBLFlBQUFDLEdBQ0FBLEVBQUFDLE1BQUFDLElBQUEsTUFDQUYsRUFBQUMsTUFBQUUsS0FBQSxNQUNBSCxFQUFBQyxNQUFBRyxVQUFBLGdDQUNBQyxXQUFBLFdBQ0FMLEVBQUFDLE1BQUFDLElBQUEsTUFDQUYsRUFBQUMsTUFBQUUsS0FBQSxNQUNBSCxFQUFBQyxNQUFBRyxVQUFBLG1DQUNB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Y0FBQSxHQUFBQSxjQUFBLEtBQ0FBLGNBQUEsR0FBQSxFQUNBQSxjQUFBLEdBQUEsRUFDQUEsY0FBQSxHQUFBLEVBQ0FBLGNBQUEsR0FBQSxLQUNBRSxhQUFBQyxZQUFBLElBQ0E4QixjQUFBMUIsYUFBQWEsT0FBQSxFQUNBaEIsY0FBQUcsYUFBQWEsT0FBQSxHQUNBbEIsYUFBQW1DLFVBQUFFLElBQUEsa0JBSUFSLFVBQUFJLFFBQUEsU0FBQUMsR0FDQSxPQUFBSCxnQkFHQUEsZ0JBQUExQixhQUFBYSxPQUFBLEdBQUFoQixnQkFBQTZCLGlCQUlBRCxhQUFBRyxRQUFBLFNBQUFDLEdBQ0EsT0FBQUgsZ0JBR0EsSUFBQUEsZUFBQTdCLGdCQUFBNkIiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGtleSAgICAgICAgICAgICAgID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImtleVwiKTtcbnZhciBrZXlEaWdpdCAgICAgICAgICA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJrZXktZGlnaXRcIik7XG52YXIga2V5T3BlcmF0b3IgICAgICAgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwia2V5LW9wZXJhdG9yc1wiKTtcbnZhciBpbnB1dERpc3BsYXkgICAgICA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiaW5wdXQtZGlzcGxheVwiKTtcbnZhciBrZXlEb3QgICAgICAgICAgICA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwia2V5LWRvdFwiKTtcbnZhciBrZXlTaWduICAgICAgICAgICA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwia2V5LXNpZ25cIik7XG52YXIga2V5Q0xSICAgICAgICAgICAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImtleS1jbHJcIik7XG52YXIga2V5UmVzdWx0ICAgICAgICAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImtleS1yZXN1bHRcIik7XG52YXIgZGlzcGxheVRlcm1PbmUgICAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRlcm0tb25lXCIpO1xudmFyIGRpc3BsYXlUZXJtVHdvICAgID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0ZXJtLXR3b1wiKTtcbnZhciBkaXNwbGF5VGVybVJlc3VsdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGVybS1yZXN1bHRcIik7XG52YXIgc2Nyb2xsVG9wICAgICAgICAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNjcm9sbC10b3BcIik7XG52YXIgc2Nyb2xsQm90dG9tICAgICAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNjcm9sbC1ib3R0b21cIik7XG52YXIgZGlzcGxheUxpbmUgICAgICAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRpc3BsYXktbGluZVwiKTtcbnZhciBvcGVyYXRpb25CdWZmICAgICA9IFsxLCAwLCAwLCBudWxsXTsgLy8gW3Rlcm0gbnVtYmVyOiBmaXJzdCgxKSBvciBzZWNvbmQoMiksIGZpcnN0IHRlcm0gdmFsdWUsIHNlY29uZCB0ZXJtIHZhbHVlLCBzaWduXVxudmFyIG15T3BlcmF0aW9ucyAgICAgID0gW107XG52YXIgY3VycmVudERpcGxheSAgICAgPSBudWxsO1xudmFyIE1BWF9JTlBVVF9MRU5HVEggPSAxMjtcblxuZm9yICh2YXIgaSA9IDA7IGkgPCBrZXlEaWdpdC5sZW5ndGg7IGkrKykge1xuICBrZXlEaWdpdFtpXS5vbmNsaWNrID0gZnVuY3Rpb24oZSkge1xuICAgIGFuaW1hdGVCdG4odGhpcyk7XG4gICAgaWYgKG51bWJlckNvdW50KGlucHV0RGlzcGxheS50ZXh0Q29udGVudCkgPj0gTUFYX0lOUFVUX0xFTkdUSCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjaGVja0J1ZmYoKTtcbiAgICBpZihpbnB1dERpc3BsYXkudGV4dENvbnRlbnQgPT09ICcwJykge1xuICAgICAgaW5wdXREaXNwbGF5LnRleHRDb250ZW50ID0gdGhpcy50ZXh0Q29udGVudDtcbiAgICB9IGVsc2UgaWYgKGlucHV0RGlzcGxheS50ZXh0Q29udGVudCA9PT0gJy0wJykge1xuICAgICAgaW5wdXREaXNwbGF5LnRleHRDb250ZW50ID0gJy0nICsgdGhpcy50ZXh0Q29udGVudDtcbiAgICB9IGVsc2Uge1xuICAgICAgaW5wdXREaXNwbGF5LnRleHRDb250ZW50ICs9IHRoaXMudGV4dENvbnRlbnQ7XG4gICAgICBpZihudW1iZXJDb3VudChpbnB1dERpc3BsYXkudGV4dENvbnRlbnQpID09PSAxMikge1xuICAgICAgICBpbnB1dERpc3BsYXkuY2xhc3NMaXN0LnJlbW92ZShcImJsaW5rLWN1cnNvclwiKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoaW5wdXREaXNwbGF5LnRleHRDb250ZW50ICE9PSAnMCcgJiYgaW5wdXREaXNwbGF5LnRleHRDb250ZW50ICE9PSAnLTAnICYmIGlucHV0RGlzcGxheS50ZXh0Q29udGVudCAhPT0gJzAuJyAmJiBpbnB1dERpc3BsYXkudGV4dENvbnRlbnQgIT09ICctMC4nKSB7XG4gICAgICB1cGRhdGVCdWZmKCk7XG4gICAgfVxuICB9O1xufVxuXG5mb3IgKHZhciBpID0gMDsgaSA8IGtleU9wZXJhdG9yLmxlbmd0aDsgaSsrKSB7XG4gIGtleU9wZXJhdG9yW2ldLm9uY2xpY2sgPSBmdW5jdGlvbihlKSB7XG4gICAgYW5pbWF0ZUJ0bih0aGlzKTtcbiAgICBpZihpbnB1dERpc3BsYXkudGV4dENvbnRlbnQgPT09ICcwJyB8fCBpbnB1dERpc3BsYXkudGV4dENvbnRlbnQgPT09ICctMCcgfHwgaW5wdXREaXNwbGF5LnRleHRDb250ZW50ID09PSAnMC4nIHx8IGlucHV0RGlzcGxheS50ZXh0Q29udGVudCA9PT0gJy0wLicpIHtcbiAgICAgIG9wZXJhdGlvbkJ1ZmZbM10gPSB0aGlzLnRleHRDb250ZW50O1xuICAgICAgcmV0dXJuO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGlmKG9wZXJhdGlvbkJ1ZmZbMF0gPT09IDEpIHtcbiAgICAgICAgICBpbnB1dERpc3BsYXkudGV4dENvbnRlbnQgPSAnMCc7XG4gICAgICAgICAgaW5wdXREaXNwbGF5LmNsYXNzTGlzdC5hZGQoXCJibGluay1jdXJzb3JcIik7XG4gICAgICAgICAgb3BlcmF0aW9uQnVmZlszXSAgICAgICAgID0gdGhpcy50ZXh0Q29udGVudDtcbiAgICAgICAgICBvcGVyYXRpb25CdWZmWzBdICAgICAgICAgPSAyO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbXlPcGVyYXRpb25zLnB1c2gobmV3IE9wZXJhdGlvbihvcGVyYXRpb25CdWZmWzFdLCBvcGVyYXRpb25CdWZmWzNdLCBvcGVyYXRpb25CdWZmWzJdKSk7XG4gICAgICAgICAgICBpbnB1dERpc3BsYXkudGV4dENvbnRlbnQgPSAnMCc7XG4gICAgICAgICAgICBpbnB1dERpc3BsYXkuY2xhc3NMaXN0LmFkZChcImJsaW5rLWN1cnNvclwiKTtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSBwYXJzZUZsb2F0KG15T3BlcmF0aW9uc1tteU9wZXJhdGlvbnMubGVuZ3RoIC0gMV0ucmVzdWx0KTtcbiAgICAgICAgICAgIG51bWJlckNvdW50KG15T3BlcmF0aW9uc1tteU9wZXJhdGlvbnMubGVuZ3RoIC0gMV0ucmVzdWx0LnRvU3RyaW5nKCkpID49IE1BWF9JTlBVVF9MRU5HVEggP1xuICAgICAgICAgICAgb3BlcmF0aW9uQnVmZlsxXSA9IHJlc3VsdC50b0V4cG9uZW50aWFsKDYpIDpcbiAgICAgICAgICAgIG9wZXJhdGlvbkJ1ZmZbMV0gPSByZXN1bHQ7XG5cbiAgICAgICAgICAgIG9wZXJhdGlvbkJ1ZmZbMl0gICAgICAgICA9IDA7XG4gICAgICAgICAgICBvcGVyYXRpb25CdWZmWzNdICAgICAgICAgPSB0aGlzLnRleHRDb250ZW50O1xuICAgICAgICAgICAgdXBkYXRlRGlzcGxheShteU9wZXJhdGlvbnMubGVuZ3RoIC0gMSk7XG4gICAgICAgICAgICBjdXJyZW50RGlwbGF5ID0gbXlPcGVyYXRpb25zLmxlbmd0aCAtIDE7XG4gICAgICAgIH1cbiAgICB9XG4gIH07XG59XG5cbmtleURvdC5vbmNsaWNrID0gZnVuY3Rpb24oZSkge1xuICBhbmltYXRlQnRuKHRoaXMpO1xuICBpZiAobnVtYmVyQ291bnQoaW5wdXREaXNwbGF5LnRleHRDb250ZW50KSA+IE1BWF9JTlBVVF9MRU5HVEggLSAxKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNoZWNrQnVmZigpO1xuICBpbnB1dERpc3BsYXkudGV4dENvbnRlbnQuaW5kZXhPZignLicpID09PSAtMSA/IGlucHV0RGlzcGxheS50ZXh0Q29udGVudCArPSB0aGlzLnRleHRDb250ZW50IDogJyc7XG4gIHVwZGF0ZUJ1ZmYoKTtcbn07XG5cbmtleVNpZ24ub25jbGljayA9IGZ1bmN0aW9uKGUpIHtcbiAgYW5pbWF0ZUJ0bih0aGlzKTtcbiAgY2hlY2tCdWZmKCk7XG4gIGlucHV0RGlzcGxheS50ZXh0Q29udGVudFswXSA9PT0gJy0nID8gaW5wdXREaXNwbGF5LnRleHRDb250ZW50ID0gaW5wdXREaXNwbGF5LnRleHRDb250ZW50LnN1YnN0cigxKSA6IGlucHV0RGlzcGxheS50ZXh0Q29udGVudCA9ICctJyArIGlucHV0RGlzcGxheS50ZXh0Q29udGVudDtcbiAgdXBkYXRlQnVmZigpO1xufTtcblxua2V5Q0xSLm9uY2xpY2sgPSBmdW5jdGlvbihlKSB7XG4gIGFuaW1hdGVCdG4odGhpcyk7XG4gIG9wZXJhdGlvbkJ1ZmZbMF0gPSAxO1xuICBvcGVyYXRpb25CdWZmWzFdID0gMDtcbiAgb3BlcmF0aW9uQnVmZlsyXSA9IDA7XG4gIG9wZXJhdGlvbkJ1ZmZbM10gPSBudWxsO1xuICBpbnB1dERpc3BsYXkudGV4dENvbnRlbnQgPSAnMCc7XG4gIGlucHV0RGlzcGxheS5jbGFzc0xpc3QuYWRkKFwiYmxpbmstY3Vyc29yXCIpO1xuICB1cGRhdGVCdWZmKCk7XG59O1xuXG5rZXlSZXN1bHQub25jbGljayA9IGZ1bmN0aW9uKGUpIHtcbiAgYW5pbWF0ZUJ0bih0aGlzKTtcbiAgaWYob3BlcmF0aW9uQnVmZlswXSA9PT0gMiAmJiAhKGlucHV0RGlzcGxheS50ZXh0Q29udGVudCA9PT0gJzAnIHx8IGlucHV0RGlzcGxheS50ZXh0Q29udGVudCA9PT0gJy0wJyB8fCBpbnB1dERpc3BsYXkudGV4dENvbnRlbnQgPT09ICcwLicgfHwgaW5wdXREaXNwbGF5LnRleHRDb250ZW50ID09PSAnLTAuJykpIHtcbiAgICBteU9wZXJhdGlvbnMucHVzaChuZXcgT3BlcmF0aW9uKG9wZXJhdGlvbkJ1ZmZbMV0sIG9wZXJhdGlvbkJ1ZmZbM10sIG9wZXJhdGlvbkJ1ZmZbMl0pKTtcbiAgICBvcGVyYXRpb25CdWZmWzBdID0gMTtcbiAgICBvcGVyYXRpb25CdWZmWzFdID0gMDtcbiAgICBvcGVyYXRpb25CdWZmWzJdID0gMDtcbiAgICBvcGVyYXRpb25CdWZmWzNdID0gbnVsbDtcbiAgICBpbnB1dERpc3BsYXkudGV4dENvbnRlbnQgPSAnMCc7XG4gICAgY3VycmVudERpcGxheSA9IG15T3BlcmF0aW9ucy5sZW5ndGggLSAxO1xuICAgIHVwZGF0ZURpc3BsYXkobXlPcGVyYXRpb25zLmxlbmd0aCAtIDEpO1xuICAgIGlucHV0RGlzcGxheS5jbGFzc0xpc3QuYWRkKFwiYmxpbmstY3Vyc29yXCIpO1xuICB9XG59O1xuXG5zY3JvbGxUb3Aub25jbGljayA9IGZ1bmN0aW9uKGUpIHtcbiAgaWYgKGN1cnJlbnREaXBsYXkgPT09IG51bGwpIHtcbiAgICByZXR1cm47XG4gIH0gZWxzZSB7XG4gICAgY3VycmVudERpcGxheSA9PT0gbXlPcGVyYXRpb25zLmxlbmd0aCAtIDEgPyAnJyA6IHVwZGF0ZURpc3BsYXkoKytjdXJyZW50RGlwbGF5KTtcbiAgfVxufTtcblxuc2Nyb2xsQm90dG9tLm9uY2xpY2sgPSBmdW5jdGlvbihlKSB7XG4gIGlmIChjdXJyZW50RGlwbGF5ID09PSBudWxsKSB7XG4gICAgcmV0dXJuO1xuICB9IGVsc2Uge1xuICAgIGN1cnJlbnREaXBsYXkgPT09IDAgPyAnJyA6IHVwZGF0ZURpc3BsYXkoLS1jdXJyZW50RGlwbGF5KTtcbiAgfVxufTtcblxuZnVuY3Rpb24gYW5pbWF0ZUJ0bihidG4pIHtcbiAgYnRuLnN0eWxlLnRvcCAgICAgICA9IFwiN3B4XCI7XG4gIGJ0bi5zdHlsZS5sZWZ0ICAgICAgPSBcIjdweFwiO1xuICBidG4uc3R5bGUuYm94U2hhZG93ID0gXCIzcHggM3B4IDBweCAwcHggcmdiYSgwLDAsMCwxKVwiO1xuICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgIGJ0bi5zdHlsZS50b3AgICAgICAgPSBcIjBweFwiO1xuICAgIGJ0bi5zdHlsZS5sZWZ0ICAgICAgPSBcIjBweFwiO1xuICAgIGJ0bi5zdHlsZS5ib3hTaGFkb3cgPSBcIjEwcHggMTBweCAwcHggMHB4IHJnYmEoMCwwLDAsMSlcIjtcbiAgfSwgMTAwKTtcbn1cblxuZnVuY3Rpb24gT3BlcmF0aW9uKHRlcm1PbmUsIG9wZXJhdG9yLCB0ZXJtVHdvKSB7XG4gIHRoaXMudGVybU9uZSAgPSBwYXJzZUZsb2F0KHRlcm1PbmUpO1xuICB0aGlzLm9wZXJhdG9yID0gb3BlcmF0b3I7XG4gIHRoaXMudGVybVR3byAgPSBwYXJzZUZsb2F0KHRlcm1Ud28pO1xuXG4gIHN3aXRjaCh0aGlzLm9wZXJhdG9yKSB7XG4gICAgY2FzZSAnKyc6XG4gICAgICB0aGlzLnJlc3VsdCA9IHBhcnNlRmxvYXQodGVybU9uZSkgKyBwYXJzZUZsb2F0KHRlcm1Ud28pO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAnLSc6XG4gICAgICB0aGlzLnJlc3VsdCA9IHBhcnNlRmxvYXQodGVybU9uZSkgLSBwYXJzZUZsb2F0KHRlcm1Ud28pO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAnKic6XG4gICAgICB0aGlzLnJlc3VsdCA9IHBhcnNlRmxvYXQodGVybU9uZSkgKiBwYXJzZUZsb2F0KHRlcm1Ud28pO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAnw7cnOlxuICAgICAgdGhpcy5yZXN1bHQgPSBwYXJzZUZsb2F0KHRlcm1PbmUpIC8gcGFyc2VGbG9hdCh0ZXJtVHdvKTtcbiAgICAgIGJyZWFrO1xuICB9XG59XG5cbmZ1bmN0aW9uIGNoZWNrQnVmZigpIHtcbiAgaWYgKG9wZXJhdGlvbkJ1ZmZbM10gIT09IG51bGwpIHtcbiAgICBvcGVyYXRpb25CdWZmWzBdID0gMjtcbiAgfVxufVxuXG5mdW5jdGlvbiB1cGRhdGVCdWZmKCl7XG4gIG9wZXJhdGlvbkJ1ZmZbMF0gPT09IDEgPyBvcGVyYXRpb25CdWZmWzFdID0gaW5wdXREaXNwbGF5LnRleHRDb250ZW50IDogb3BlcmF0aW9uQnVmZlsyXSA9IGlucHV0RGlzcGxheS50ZXh0Q29udGVudDtcbn1cblxuZnVuY3Rpb24gdXBkYXRlRGlzcGxheShpbmRleCkge1xuICB2YXIgb3BlcmF0aW9uID0gbXlPcGVyYXRpb25zW2luZGV4XTtcblxuICBpbmRleCA+IDAgPyBkaXNwbGF5TGluZS5zdHlsZS52aXNpYmlsaXR5ID0gXCJ2aXNpYmxlXCIgOiBkaXNwbGF5TGluZS5zdHlsZS52aXNpYmlsaXR5ID0gXCJoaWRkZW5cIjtcbiAgZGlzcGxheVRlcm1PbmUudGV4dENvbnRlbnQgPSBvcGVyYXRpb24udGVybU9uZSArIFwiIFwiICsgb3BlcmF0aW9uLm9wZXJhdG9yO1xuICBkaXNwbGF5VGVybVR3by50ZXh0Q29udGVudCA9IG9wZXJhdGlvbi50ZXJtVHdvICsgXCIgPVwiO1xuICBudW1iZXJDb3VudChvcGVyYXRpb24ucmVzdWx0LnRvU3RyaW5nKCkpID4gTUFYX0lOUFVUX0xFTkdUSCA/IGRpc3BsYXlUZXJtUmVzdWx0LnRleHRDb250ZW50ID0gb3BlcmF0aW9uLnJlc3VsdC50b0V4cG9uZW50aWFsKDYpIDogZGlzcGxheVRlcm1SZXN1bHQudGV4dENvbnRlbnQgPSBvcGVyYXRpb24ucmVzdWx0O1xufVxuXG5mdW5jdGlvbiBudW1iZXJDb3VudChudW1iZXIpIHtcbiAgbnVtYmVyID0gbnVtYmVyLm1hdGNoKC9cXGQvZyk7XG4gIHJldHVybiBudW1iZXIuam9pbihcIlwiKS5sZW5ndGg7XG59XG4iXX0=
