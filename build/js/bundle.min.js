function animateBtn(t){t.style.top="7px",t.style.left="7px",t.style.boxShadow="3px 3px 0px 0px rgba(0,0,0,1)",setTimeout(function(){t.style.top="0px",t.style.left="0px",t.style.boxShadow="10px 10px 0px 0px rgba(0,0,0,1)"},100)}function Operation(t,e,n){switch(this.termOne=t,this.operator=e,this.termTwo=n,this.operator){case"+":this.result=t+n;break;case"-":this.result=t-n;break;case"*":this.result=t*n;break;case"รท":this.result=t/n}}function checkBuff(){null!==operationBuff[3]&&(operationBuff[0]=2)}function updateBuff(){1===operationBuff[0]?operationBuff[1]=parseFloat(inputDisplay.textContent):operationBuff[2]=parseFloat(inputDisplay.textContent)}function updateDisplay(t){var e=myOperations[t];displayLine.style.visibility=t>0?"visible":"hidden",displayTermOne.textContent=e.termOne+" "+e.operator,displayTermTwo.textContent=e.termTwo+" =",numberCount(e.result.toString())>MAX_INPUT_LENGTH?displayTermResult.textContent=e.result.toExponential(6):displayTermResult.textContent=e.result}function numberCount(t){return t=t.match(/\d/g),t.join("").length}for(var key=document.getElementsByClassName("key"),keyDigit=document.getElementsByClassName("key-digit"),keyOperator=document.getElementsByClassName("key-operators"),inputDisplay=document.getElementById("input-display"),keyDot=document.getElementById("key-dot"),keySign=document.getElementById("key-sign"),keyCLR=document.getElementById("key-clr"),keyResult=document.getElementById("key-result"),displayTermOne=document.getElementById("term-one"),displayTermTwo=document.getElementById("term-two"),displayTermResult=document.getElementById("term-result"),scrollTop=document.getElementById("scroll-top"),scrollBottom=document.getElementById("scroll-bottom"),displayLine=document.getElementById("display-line"),operationBuff=[1,0,0,null],myOperations=[],currentDiplay=null,MAX_INPUT_LENGTH=12,i=0;i<keyDigit.length;i++)keyDigit[i].onclick=function(t){animateBtn(this),numberCount(inputDisplay.textContent)>=MAX_INPUT_LENGTH||(checkBuff(),"0"===inputDisplay.textContent?inputDisplay.textContent=this.textContent:inputDisplay.textContent+=this.textContent,"0"!==inputDisplay.textContent&&"-0"!==inputDisplay.textContent&&"0."!==inputDisplay.textContent&&"-0."!==inputDisplay.textContent&&updateBuff())};for(var i=0;i<keyOperator.length;i++)keyOperator[i].onclick=function(t){if(animateBtn(this),"0"===inputDisplay.textContent||"-0"===inputDisplay.textContent||"0."===inputDisplay.textContent||"-0."===inputDisplay.textContent)return void(operationBuff[3]=this.textContent);1===operationBuff[0]?(inputDisplay.textContent="0",operationBuff[3]=this.textContent,operationBuff[0]=2):(myOperations.push(new Operation(operationBuff[1],operationBuff[3],operationBuff[2])),inputDisplay.textContent="0",operationBuff[1]=myOperations[myOperations.length-1].result,operationBuff[2]=0,operationBuff[3]=this.textContent,updateDisplay(myOperations.length-1),currentDiplay=myOperations.length-1)};keyDot.onclick=function(t){animateBtn(this),numberCount(inputDisplay.textContent)>MAX_INPUT_LENGTH-1||(checkBuff(),inputDisplay.textContent.indexOf(".")===-1&&(inputDisplay.textContent+=this.textContent),updateBuff())},keySign.onclick=function(t){animateBtn(this),checkBuff(),"-"===inputDisplay.textContent[0]?inputDisplay.textContent=inputDisplay.textContent.substr(1):inputDisplay.textContent="-"+inputDisplay.textContent,updateBuff()},keyCLR.onclick=function(t){animateBtn(this),inputDisplay.textContent="0",updateBuff()},keyResult.onclick=function(t){animateBtn(this),2===operationBuff[0]&&"0"!==inputDisplay.textContent&&"-0"!==inputDisplay.textContent&&"0."!==inputDisplay.textContent&&"-0."!==inputDisplay.textContent&&(myOperations.push(new Operation(operationBuff[1],operationBuff[3],operationBuff[2])),operationBuff[0]=1,operationBuff[1]=0,operationBuff[2]=0,operationBuff[3]=null,inputDisplay.textContent="0",currentDiplay=myOperations.length-1,updateDisplay(myOperations.length-1))},scrollTop.onclick=function(t){null!==currentDiplay&&(currentDiplay===myOperations.length-1||updateDisplay(++currentDiplay))},scrollBottom.onclick=function(t){null!==currentDiplay&&(0===currentDiplay||updateDisplay(--currentDiplay))};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiYW5pbWF0ZUJ0biIsImJ0biIsInN0eWxlIiwidG9wIiwibGVmdCIsImJveFNoYWRvdyIsInNldFRpbWVvdXQiLCJPcGVyYXRpb24iLCJ0ZXJtT25lIiwib3BlcmF0b3IiLCJ0ZXJtVHdvIiwidGhpcyIsInJlc3VsdCIsImNoZWNrQnVmZiIsIm9wZXJhdGlvbkJ1ZmYiLCJ1cGRhdGVCdWZmIiwicGFyc2VGbG9hdCIsImlucHV0RGlzcGxheSIsInRleHRDb250ZW50IiwidXBkYXRlRGlzcGxheSIsImluZGV4Iiwib3BlcmF0aW9uIiwibXlPcGVyYXRpb25zIiwiZGlzcGxheUxpbmUiLCJ2aXNpYmlsaXR5IiwiZGlzcGxheVRlcm1PbmUiLCJkaXNwbGF5VGVybVR3byIsIm51bWJlckNvdW50IiwidG9TdHJpbmciLCJNQVhfSU5QVVRfTEVOR1RIIiwiZGlzcGxheVRlcm1SZXN1bHQiLCJ0b0V4cG9uZW50aWFsIiwibnVtYmVyIiwibWF0Y2giLCJqb2luIiwibGVuZ3RoIiwia2V5IiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwia2V5RGlnaXQiLCJrZXlPcGVyYXRvciIsImdldEVsZW1lbnRCeUlkIiwia2V5RG90Iiwia2V5U2lnbiIsImtleUNMUiIsImtleVJlc3VsdCIsInNjcm9sbFRvcCIsInNjcm9sbEJvdHRvbSIsImN1cnJlbnREaXBsYXkiLCJpIiwib25jbGljayIsImUiLCJwdXNoIiwiaW5kZXhPZiIsInN1YnN0ciJdLCJtYXBwaW5ncyI6IkFBOEdBLFFBQUFBLFlBQUFDLEdBQ0FBLEVBQUFDLE1BQUFDLElBQUEsTUFDQUYsRUFBQUMsTUFBQUUsS0FBQSxNQUNBSCxFQUFBQyxNQUFBRyxVQUFBLGdDQUNBQyxXQUFBLFdBQ0FMLEVBQUFDLE1BQUFDLElBQUEsTUFDQUYsRUFBQUMsTUFBQUUsS0FBQSxNQUNBSCxFQUFBQyxNQUFBRyxVQUFBLG1DQUNBLEtBR0EsUUFBQUUsV0FBQUMsRUFBQUMsRUFB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QUEsU0FBQUMsR0FDQW5ELFdBQUFXLE1BQ0FnQixZQUFBVixhQUFBQyxhQUFBVyxpQkFBQSxJQUdBaEIsWUFDQUksYUFBQUMsWUFBQW1DLFFBQUEsUUFBQSxJQUFBcEMsYUFBQUMsYUFBQVAsS0FBQU8sYUFDQUgsZUFHQTRCLFFBQUFPLFFBQUEsU0FBQUMsR0FDQW5ELFdBQUFXLE1BQ0FFLFlBQ0EsTUFBQUksYUFBQUMsWUFBQSxHQUFBRCxhQUFBQyxZQUFBRCxhQUFBQyxZQUFBb0MsT0FBQSxHQUFBckMsYUFBQUMsWUFBQSxJQUFBRCxhQUFBQyxZQUNBSCxjQUdBNkIsT0FBQU0sUUFBQSxTQUFBQyxHQUNBbkQsV0FBQVcsTUFDQU0sYUFBQUMsWUFBQSxJQUNBSCxjQUdBOEIsVUFBQUssUUFBQSxTQUFBQyxHQUNBbkQsV0FBQVcsTUFDQSxJQUFBRyxjQUFBLElBQUEsTUFBQUcsYUFBQUMsYUFBQSxPQUFBRCxhQUFBQyxhQUFBLE9BQUFELGFBQUFDLGFBQUEsUUFBQUQsYUFBQUMsY0FDQUksYUFBQThCLEtBQUEsR0FBQTdDLFdBQUFPLGNBQUEsR0FBQUEsY0FBQSxHQUFBQSxjQUFBLEtBQ0FBLGNBQUEsR0FBQSxFQUNBQSxjQUFBLEdBQUEsRUFDQUEsY0FBQSxHQUFBLEVBQ0FBLGNBQUEsR0FBQSxLQUNBRyxhQUFBQyxZQUFBLElBQ0E4QixjQUFBMUIsYUFBQWEsT0FBQSxFQUNBaEIsY0FBQUcsYUFBQWEsT0FBQSxLQUlBVyxVQUFBSSxRQUFBLFNBQUFDLEdBQ0EsT0FBQUgsZ0JBR0FBLGdCQUFBMUIsYUFBQWEsT0FBQSxHQUFBaEIsZ0JBQUE2QixpQkFJQUQsYUFBQUcsUUFBQSxTQUFBQyxHQUNBLE9BQUFILGdCQUdBLElBQUFBLGVBQUE3QixnQkFBQTZCIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBrZXkgICAgICAgICAgICAgICA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJrZXlcIik7XG52YXIga2V5RGlnaXQgICAgICAgICAgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwia2V5LWRpZ2l0XCIpO1xudmFyIGtleU9wZXJhdG9yICAgICAgID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImtleS1vcGVyYXRvcnNcIik7XG52YXIgaW5wdXREaXNwbGF5ICAgICAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImlucHV0LWRpc3BsYXlcIik7XG52YXIga2V5RG90ICAgICAgICAgICAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImtleS1kb3RcIik7XG52YXIga2V5U2lnbiAgICAgICAgICAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImtleS1zaWduXCIpO1xudmFyIGtleUNMUiAgICAgICAgICAgID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJrZXktY2xyXCIpO1xudmFyIGtleVJlc3VsdCAgICAgICAgID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJrZXktcmVzdWx0XCIpO1xudmFyIGRpc3BsYXlUZXJtT25lICAgID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0ZXJtLW9uZVwiKTtcbnZhciBkaXNwbGF5VGVybVR3byAgICA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGVybS10d29cIik7XG52YXIgZGlzcGxheVRlcm1SZXN1bHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRlcm0tcmVzdWx0XCIpO1xudmFyIHNjcm9sbFRvcCAgICAgICAgID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzY3JvbGwtdG9wXCIpO1xudmFyIHNjcm9sbEJvdHRvbSAgICAgID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzY3JvbGwtYm90dG9tXCIpO1xudmFyIGRpc3BsYXlMaW5lICAgICAgID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkaXNwbGF5LWxpbmVcIik7XG52YXIgb3BlcmF0aW9uQnVmZiAgICAgPSBbMSwgMCwgMCwgbnVsbF07IC8vIFt0ZXJtIG51bWJlcjogZmlyc3QoMSkgb3Igc2Vjb25kKDIpLCBmaXJzdCB0ZXJtIHZhbHVlLCBzZWNvbmQgdGVybSB2YWx1ZSwgc2lnbl1cbnZhciBteU9wZXJhdGlvbnMgICAgICA9IFtdO1xudmFyIGN1cnJlbnREaXBsYXkgICAgID0gbnVsbDtcbnZhciBNQVhfSU5QVVRfTEVOR1RIID0gMTI7XG5cbmZvciAodmFyIGkgPSAwOyBpIDwga2V5RGlnaXQubGVuZ3RoOyBpKyspIHtcbiAga2V5RGlnaXRbaV0ub25jbGljayA9IGZ1bmN0aW9uKGUpIHtcbiAgICBhbmltYXRlQnRuKHRoaXMpO1xuICAgIGlmIChudW1iZXJDb3VudChpbnB1dERpc3BsYXkudGV4dENvbnRlbnQpID49IE1BWF9JTlBVVF9MRU5HVEgpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY2hlY2tCdWZmKCk7XG4gICAgaW5wdXREaXNwbGF5LnRleHRDb250ZW50ID09PSAnMCcgPyBpbnB1dERpc3BsYXkudGV4dENvbnRlbnQgPSB0aGlzLnRleHRDb250ZW50IDogaW5wdXREaXNwbGF5LnRleHRDb250ZW50ICs9IHRoaXMudGV4dENvbnRlbnQ7XG4gICAgaWYgKGlucHV0RGlzcGxheS50ZXh0Q29udGVudCAhPT0gJzAnICYmIGlucHV0RGlzcGxheS50ZXh0Q29udGVudCAhPT0gJy0wJyAmJiBpbnB1dERpc3BsYXkudGV4dENvbnRlbnQgIT09ICcwLicgJiYgaW5wdXREaXNwbGF5LnRleHRDb250ZW50ICE9PSAnLTAuJykge1xuICAgICAgdXBkYXRlQnVmZigpO1xuICAgIH1cbiAgfTtcbn1cblxuZm9yICh2YXIgaSA9IDA7IGkgPCBrZXlPcGVyYXRvci5sZW5ndGg7IGkrKykge1xuICBrZXlPcGVyYXRvcltpXS5vbmNsaWNrID0gZnVuY3Rpb24oZSkge1xuICAgIGFuaW1hdGVCdG4odGhpcyk7XG4gICAgaWYoaW5wdXREaXNwbGF5LnRleHRDb250ZW50ID09PSAnMCcgfHwgaW5wdXREaXNwbGF5LnRleHRDb250ZW50ID09PSAnLTAnIHx8IGlucHV0RGlzcGxheS50ZXh0Q29udGVudCA9PT0gJzAuJyB8fCBpbnB1dERpc3BsYXkudGV4dENvbnRlbnQgPT09ICctMC4nKSB7XG4gICAgICBvcGVyYXRpb25CdWZmWzNdID0gdGhpcy50ZXh0Q29udGVudDtcbiAgICAgIHJldHVybjtcbiAgICB9IGVsc2Uge1xuICAgICAgICBpZihvcGVyYXRpb25CdWZmWzBdID09PSAxKSB7XG4gICAgICAgICAgaW5wdXREaXNwbGF5LnRleHRDb250ZW50ID0gJzAnO1xuICAgICAgICAgIG9wZXJhdGlvbkJ1ZmZbM10gICAgICAgICA9IHRoaXMudGV4dENvbnRlbnQ7XG4gICAgICAgICAgb3BlcmF0aW9uQnVmZlswXSAgICAgICAgID0gMjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG15T3BlcmF0aW9ucy5wdXNoKG5ldyBPcGVyYXRpb24ob3BlcmF0aW9uQnVmZlsxXSwgb3BlcmF0aW9uQnVmZlszXSwgb3BlcmF0aW9uQnVmZlsyXSkpO1xuICAgICAgICAgICAgaW5wdXREaXNwbGF5LnRleHRDb250ZW50ID0gJzAnO1xuICAgICAgICAgICAgb3BlcmF0aW9uQnVmZlsxXSAgICAgICAgID0gbXlPcGVyYXRpb25zW215T3BlcmF0aW9ucy5sZW5ndGggLSAxXS5yZXN1bHQ7XG4gICAgICAgICAgICBvcGVyYXRpb25CdWZmWzJdICAgICAgICAgPSAwO1xuICAgICAgICAgICAgb3BlcmF0aW9uQnVmZlszXSAgICAgICAgID0gdGhpcy50ZXh0Q29udGVudDtcbiAgICAgICAgICAgIHVwZGF0ZURpc3BsYXkobXlPcGVyYXRpb25zLmxlbmd0aCAtIDEpO1xuICAgICAgICAgICAgY3VycmVudERpcGxheSA9IG15T3BlcmF0aW9ucy5sZW5ndGggLSAxO1xuICAgICAgICB9XG4gICAgfVxuICB9O1xufVxuXG5rZXlEb3Qub25jbGljayA9IGZ1bmN0aW9uKGUpIHtcbiAgYW5pbWF0ZUJ0bih0aGlzKTtcbiAgaWYgKG51bWJlckNvdW50KGlucHV0RGlzcGxheS50ZXh0Q29udGVudCkgPiBNQVhfSU5QVVRfTEVOR1RIIC0gMSkge1xuICAgIHJldHVybjtcbiAgfVxuICBjaGVja0J1ZmYoKTtcbiAgaW5wdXREaXNwbGF5LnRleHRDb250ZW50LmluZGV4T2YoJy4nKSA9PT0gLTEgPyBpbnB1dERpc3BsYXkudGV4dENvbnRlbnQgKz0gdGhpcy50ZXh0Q29udGVudCA6ICcnO1xuICB1cGRhdGVCdWZmKCk7XG59O1xuXG5rZXlTaWduLm9uY2xpY2sgPSBmdW5jdGlvbihlKSB7XG4gIGFuaW1hdGVCdG4odGhpcyk7XG4gIGNoZWNrQnVmZigpO1xuICBpbnB1dERpc3BsYXkudGV4dENvbnRlbnRbMF0gPT09ICctJyA/IGlucHV0RGlzcGxheS50ZXh0Q29udGVudCA9IGlucHV0RGlzcGxheS50ZXh0Q29udGVudC5zdWJzdHIoMSkgOiBpbnB1dERpc3BsYXkudGV4dENvbnRlbnQgPSAnLScgKyBpbnB1dERpc3BsYXkudGV4dENvbnRlbnQ7XG4gIHVwZGF0ZUJ1ZmYoKTtcbn07XG5cbmtleUNMUi5vbmNsaWNrID0gZnVuY3Rpb24oZSkge1xuICBhbmltYXRlQnRuKHRoaXMpO1xuICBpbnB1dERpc3BsYXkudGV4dENvbnRlbnQgPSAnMCc7XG4gIHVwZGF0ZUJ1ZmYoKTtcbn07IC8vIFRPRE86IHJlc2V0IGJ1ZmZcblxua2V5UmVzdWx0Lm9uY2xpY2sgPSBmdW5jdGlvbihlKSB7XG4gIGFuaW1hdGVCdG4odGhpcyk7XG4gIGlmKG9wZXJhdGlvbkJ1ZmZbMF0gPT09IDIgJiYgIShpbnB1dERpc3BsYXkudGV4dENvbnRlbnQgPT09ICcwJyB8fCBpbnB1dERpc3BsYXkudGV4dENvbnRlbnQgPT09ICctMCcgfHwgaW5wdXREaXNwbGF5LnRleHRDb250ZW50ID09PSAnMC4nIHx8IGlucHV0RGlzcGxheS50ZXh0Q29udGVudCA9PT0gJy0wLicpKSB7XG4gICAgbXlPcGVyYXRpb25zLnB1c2gobmV3IE9wZXJhdGlvbihvcGVyYXRpb25CdWZmWzFdLCBvcGVyYXRpb25CdWZmWzNdLCBvcGVyYXRpb25CdWZmWzJdKSk7XG4gICAgb3BlcmF0aW9uQnVmZlswXSA9IDE7XG4gICAgb3BlcmF0aW9uQnVmZlsxXSA9IDA7XG4gICAgb3BlcmF0aW9uQnVmZlsyXSA9IDA7XG4gICAgb3BlcmF0aW9uQnVmZlszXSA9IG51bGw7XG4gICAgaW5wdXREaXNwbGF5LnRleHRDb250ZW50ID0gJzAnO1xuICAgIGN1cnJlbnREaXBsYXkgPSBteU9wZXJhdGlvbnMubGVuZ3RoIC0gMTtcbiAgICB1cGRhdGVEaXNwbGF5KG15T3BlcmF0aW9ucy5sZW5ndGggLSAxKTtcbiAgfVxufTtcblxuc2Nyb2xsVG9wLm9uY2xpY2sgPSBmdW5jdGlvbihlKSB7XG4gIGlmIChjdXJyZW50RGlwbGF5ID09PSBudWxsKSB7XG4gICAgcmV0dXJuO1xuICB9IGVsc2Uge1xuICAgIGN1cnJlbnREaXBsYXkgPT09IG15T3BlcmF0aW9ucy5sZW5ndGggLSAxID8gJycgOiB1cGRhdGVEaXNwbGF5KCsrY3VycmVudERpcGxheSk7XG4gIH1cbn07XG5cbnNjcm9sbEJvdHRvbS5vbmNsaWNrID0gZnVuY3Rpb24oZSkge1xuICBpZiAoY3VycmVudERpcGxheSA9PT0gbnVsbCkge1xuICAgIHJldHVybjtcbiAgfSBlbHNlIHtcbiAgICBjdXJyZW50RGlwbGF5ID09PSAwID8gJycgOiB1cGRhdGVEaXNwbGF5KC0tY3VycmVudERpcGxheSk7XG4gIH1cbn07XG5cbmZ1bmN0aW9uIGFuaW1hdGVCdG4oYnRuKSB7XG4gIGJ0bi5zdHlsZS50b3AgICAgICAgPSBcIjdweFwiO1xuICBidG4uc3R5bGUubGVmdCAgICAgID0gXCI3cHhcIjtcbiAgYnRuLnN0eWxlLmJveFNoYWRvdyA9IFwiM3B4IDNweCAwcHggMHB4IHJnYmEoMCwwLDAsMSlcIjtcbiAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICBidG4uc3R5bGUudG9wICAgICAgID0gXCIwcHhcIjtcbiAgICBidG4uc3R5bGUubGVmdCAgICAgID0gXCIwcHhcIjtcbiAgICBidG4uc3R5bGUuYm94U2hhZG93ID0gXCIxMHB4IDEwcHggMHB4IDBweCByZ2JhKDAsMCwwLDEpXCI7XG4gIH0sIDEwMCk7XG59XG5cbmZ1bmN0aW9uIE9wZXJhdGlvbih0ZXJtT25lLCBvcGVyYXRvciwgdGVybVR3bykge1xuICB0aGlzLnRlcm1PbmUgID0gdGVybU9uZTtcbiAgdGhpcy5vcGVyYXRvciA9IG9wZXJhdG9yO1xuICB0aGlzLnRlcm1Ud28gID0gdGVybVR3bztcblxuICBzd2l0Y2godGhpcy5vcGVyYXRvcikge1xuICAgIGNhc2UgJysnOlxuICAgICAgdGhpcy5yZXN1bHQgPSB0ZXJtT25lICsgdGVybVR3bztcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgJy0nOlxuICAgICAgdGhpcy5yZXN1bHQgPSB0ZXJtT25lIC0gdGVybVR3bztcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgJyonOlxuICAgICAgdGhpcy5yZXN1bHQgPSB0ZXJtT25lICogdGVybVR3bztcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgJ8O3JzpcbiAgICAgIHRoaXMucmVzdWx0ID0gdGVybU9uZSAvIHRlcm1Ud287XG4gICAgICBicmVhaztcbiAgfVxufVxuXG5mdW5jdGlvbiBjaGVja0J1ZmYoKSB7XG4gIGlmIChvcGVyYXRpb25CdWZmWzNdICE9PSBudWxsKSB7XG4gICAgb3BlcmF0aW9uQnVmZlswXSA9IDI7XG4gIH1cbn1cblxuZnVuY3Rpb24gdXBkYXRlQnVmZigpe1xuICBvcGVyYXRpb25CdWZmWzBdID09PSAxID8gb3BlcmF0aW9uQnVmZlsxXSA9IHBhcnNlRmxvYXQoaW5wdXREaXNwbGF5LnRleHRDb250ZW50KSA6IG9wZXJhdGlvbkJ1ZmZbMl0gPSBwYXJzZUZsb2F0KGlucHV0RGlzcGxheS50ZXh0Q29udGVudCk7XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZURpc3BsYXkoaW5kZXgpIHtcbiAgdmFyIG9wZXJhdGlvbiA9IG15T3BlcmF0aW9uc1tpbmRleF07XG5cbiAgaW5kZXggPiAwID8gZGlzcGxheUxpbmUuc3R5bGUudmlzaWJpbGl0eSA9IFwidmlzaWJsZVwiIDogZGlzcGxheUxpbmUuc3R5bGUudmlzaWJpbGl0eSA9IFwiaGlkZGVuXCI7XG4gIGRpc3BsYXlUZXJtT25lLnRleHRDb250ZW50ID0gb3BlcmF0aW9uLnRlcm1PbmUgKyBcIiBcIiArIG9wZXJhdGlvbi5vcGVyYXRvcjtcbiAgZGlzcGxheVRlcm1Ud28udGV4dENvbnRlbnQgPSBvcGVyYXRpb24udGVybVR3byArIFwiID1cIjtcbiAgbnVtYmVyQ291bnQob3BlcmF0aW9uLnJlc3VsdC50b1N0cmluZygpKSA+IE1BWF9JTlBVVF9MRU5HVEggPyBkaXNwbGF5VGVybVJlc3VsdC50ZXh0Q29udGVudCA9IG9wZXJhdGlvbi5yZXN1bHQudG9FeHBvbmVudGlhbCg2KSA6IGRpc3BsYXlUZXJtUmVzdWx0LnRleHRDb250ZW50ID0gb3BlcmF0aW9uLnJlc3VsdDtcbn1cblxuZnVuY3Rpb24gbnVtYmVyQ291bnQobnVtYmVyKSB7XG4gIG51bWJlciA9IG51bWJlci5tYXRjaCgvXFxkL2cpO1xuICByZXR1cm4gbnVtYmVyLmpvaW4oXCJcIikubGVuZ3RoO1xufVxuIl19
